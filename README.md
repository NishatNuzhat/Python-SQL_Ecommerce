# Python+SQL_Ecommerce
## Overview
Target is a globally recognized brand and a leading retailer in the united states,known for offering exceptional value,inspiration,innovation and a unique shopping experience.
This dataset focuses on Target's operations in Brazil,covering 100,000 orders placed 2016 and 2018.It includes detail information on order status,pricing,payment and shopping performance,customer locations,product attributes and customer reviews.
## The Objectives
- Loading the dataset to MySQL with the help of Python.
- Using SQL queries for analyzing the dataset.
- Using Python for data visualization.
## Dataset
The dataset for this project is sourced from kaggle.
## Business Problems and Solutions

### 1. List all unique cities where customers are located.

```sql
SELECT 
distinct customer_city 
FROM 
customers;
```
### 2. Count the number of orders placed in 2017.

```sql
SELECT 
COUNT(*) 
FROM 
orders
WHERE
YEAR(order_purchase_timestamp) = 2017;
```
### 3. Find the total sales per category.

```sql
select 
UPPER(p.product_category) as Category,
ROUND(SUM(pa.payment_value),2) as Total_Sales
FROM
products as p
left join
order_items as o
ON 
p.product_id = o.product_id
left join
payments as pa
on o.order_id = pa.order_id
GROUP BY 
Category;
```
### 4. Calculate the percentage of orders that were paid in installments.

```sql
select 
((sum(case when payment_installments >= 1 then 1 else 0 end))/count(*))*100 as Installment_Order_Percentage
from payments;
```
### 5. Count the number of customers from each state.
```sql
select 
customer_state,count(customer_id) as Total_customers
from customers
group by 1
order by 2 desc;
```
### 6. Calculate the number of orders per month in 2018.
```sql
SELECT 
monthname(order_purchase_timestamp) as "Month",
COUNT(*) as Orders
FROM 
orders
WHERE
YEAR(order_purchase_timestamp) = 2018
group by 1;
```
### 7. Find the average number of products per order, grouped by customer city.
```sql
with count_per_order as 
(select 
o.order_id,
o.customer_id,
count(oi.order_id) as oc
from orders as o
left join order_items as oi
on o.order_id = oi.order_id
group by
1,2)
select 
c.customer_city,
round(avg(count_per_order.oc),2) as average_products_per_order
from
customers as c
left join
count_per_order
on c.customer_id = count_per_order.customer_id
group by 1
order by 2 desc
limit 10;
```
### 8. Calculate the percentage of total revenue contributed by each product category.
```sql
select 
UPPER(p.product_category) as Category,
ROUND((SUM(pa.payment_value)/(select SUM(payment_value) from payments))*100,2) as Revenue_Percentage
FROM
products as p
left join
order_items as o
ON 
p.product_id = o.product_id
left join
payments as pa
on o.order_id = pa.order_id
GROUP BY 
Category
ORDER BY 2 desc;
```
### 9. Calculate the total revenue generated by each seller, and rank them by revenue.
```sql
select
* , dense_rank() over (order by revenue desc) as ranking
from (select
oi.seller_id,
sum(pa.payment_value) as revenue
from
order_items as oi
left join 
payments as pa
on oi.order_id = pa.order_id
group by 1) as a;
```
